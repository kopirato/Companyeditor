<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Selelo Ultra-HD Media Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

body{
    margin:0;
    font-family:'Inter',sans-serif;
    background: linear-gradient(135deg,#020617,#0f172a);
    color:#f8fafc;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.app{
    max-width:600px;
    width:90%;
    padding:40px 25px;
    background: rgba(2,6,23,0.85);
    border-radius:28px;
    box-shadow:0 25px 60px rgba(0,0,0,0.85);
    backdrop-filter: blur(12px);
}

.header{text-align:center;margin-bottom:30px;}
.header h1{font-size:30px;color:#38bdf8;font-weight:700;}
.header p{font-size:15px;color:#94a3b8;}

.panel{
    background:#020617;
    border:1px solid #0f172a;
    border-radius:20px;
    padding:30px;
    box-shadow:0 15px 50px rgba(0,0,0,0.8);
}

input[type="file"]{
    width:100%;
    background:#020617;
    border:1px dashed #334155;
    color:#f8fafc;
    padding:16px;
    border-radius:14px;
    cursor:pointer;
    transition:border-color 0.3s ease;
}
input[type="file"]:hover{border-color:#38bdf8;}

.preview{margin-top:30px;text-align:center;position:relative;}
canvas, video{
    width:100%;
    display:none;
    border-radius:14px;
    box-shadow:0 5px 25px rgba(0,0,0,0.5);
    transition:opacity 0.5s ease;
}

.controls{margin-top:25px;}
button{
    width:100%;
    background:linear-gradient(135deg,#38bdf8,#0284c7);
    border:none;color:#020617;
    padding:16px;
    border-radius:14px;
    font-weight:700;
    font-size:16px;
    cursor:pointer;
    transition:background 0.3s ease, transform 0.2s ease;
}
button:hover{background:linear-gradient(135deg,#0ea5e9,#0369a1);transform:translateY(-2px);}
button:disabled{background:#334155;color:#94a3b8;cursor:not-allowed;}

#status{text-align:center;margin-top:15px;font-size:14px;color:#94a3b8;}
#status.success{color:#22c55e;}
</style>
</head>

<body>

<div class="app">
    <div class="header">
        <h1>Selelo Ultra-HD Media Studio</h1>
        <p>Upload images or videos → Maximum enhancement → Download</p>
    </div>
    <div class="panel">
        <input type="file" id="upload" accept="image/*,video/*">
        <div class="preview">
            <canvas id="canvas"></canvas>
            <video id="video" controls></video>
        </div>
        <div class="controls">
            <button id="download" disabled>Download Media</button>
        </div>
        <p id="status"></p>
    </div>
</div>

<script>
const upload=document.getElementById("upload");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const video=document.getElementById("video");
const downloadBtn=document.getElementById("download");
const status=document.getElementById("status");

let finalBlob=null;
let currentType=null;

upload.addEventListener("change",e=>{
    const file=e.target.files[0];
    if(!file) return;

    downloadBtn.disabled=true;
    finalBlob=null;
    status.textContent="Processing...";

    if(file.type.startsWith("image")){
        currentType="image";
        processImage(file);
    } else if(file.type.startsWith("video")){
        currentType="video";
        processVideo(file);
    } else {
        alert("Unsupported file type");
    }
});

// ================= IMAGE PROCESSING =================
function processImage(file){
    video.style.display="none";
    canvas.style.display="block";

    const img=new Image();
    img.onload=()=>{
        // 4X upscale for ultra-detail
        canvas.width=img.width*4;
        canvas.height=img.height*4;
        ctx.imageSmoothingEnabled=true;
        ctx.imageSmoothingQuality="high";
        ctx.drawImage(img,0,0,canvas.width,canvas.height);

        applyEnhancement();
        applyHDRGlow();

        canvas.toBlob(blob=>{
            finalBlob=blob;
            downloadBtn.disabled=false;
            status.textContent="Ultra-HD Image ready ✅";
        },"image/png",1.0);
    };
    img.src=URL.createObjectURL(file);
}

// ================= VIDEO PROCESSING =================
function processVideo(file){
    canvas.style.display="none";
    video.style.display="block";
    const url=URL.createObjectURL(file);
    video.src=url;

    finalBlob=file; // original video, unchanged
    downloadBtn.disabled=false;
    status.textContent="Video ready (original quality) ✅";
}

// ================= ENHANCEMENT FUNCTIONS =================
function applyEnhancement(){
    let imgData=ctx.getImageData(0,0,canvas.width,canvas.height);
    let d=imgData.data;
    for(let i=0;i<d.length;i+=4){
        let r=d[i],g=d[i+1],b=d[i+2];
        r=(r-128)*1.3+128; g=(g-128)*1.3+128; b=(b-128)*1.3+128; // contrast
        r*=1.08; g*=1.05; b*=1.12; // vibrance
        d[i]=clamp(r); d[i+1]=clamp(g); d[i+2]=clamp(b);
    }
    ctx.putImageData(imgData,0,0);
}

function applyHDRGlow(){
    let w=canvas.width,h=canvas.height;
    ctx.globalAlpha=0.1;
    for(let i=0;i<5;i++){
        ctx.drawImage(canvas,0,0,w,h);
    }
    ctx.globalAlpha=1;
}

// ================= DOWNLOAD =================
downloadBtn.addEventListener("click",()=>{
    if(!finalBlob) return;
    const url=URL.createObjectURL(finalBlob);
    const a=document.createElement("a");
    a.href=url;
    a.download=currentType==="image" ? "selelo_ultrahd.png" : "selelo_video.mp4";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
});

function clamp(v){ return Math.max(0,Math.min(255,v)); }
</script>

</body>
</html>
